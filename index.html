<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>pad</title>
<style>
  :root { color-scheme: light dark; }
  html, body { height: 100%; margin: 0; }
  body { background: #fff; }
  textarea {
    width: 100%; height: 100%;
    border: 0; outline: none; resize: none;
    padding: 16px 18px; line-height: 1.45;
    font: 14px/1.45 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background: inherit; color: inherit;
  }
  .toast {
    position: fixed; right: 12px; bottom: 12px;
    padding: 6px 10px; border-radius: 8px;
    font: 12px system-ui,-apple-system,Segoe UI,Roboto,Arial;
    background: rgba(0,0,0,.075); color: inherit; border: 1px solid rgba(0,0,0,.1);
    opacity: 0; transition: opacity .15s ease;
    user-select: none; pointer-events: none;
  }
  @media (prefers-color-scheme: dark) {
    body { background: #0b0b0b; color: #e8e8e8; }
    .toast { background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.12); }
  }
</style>
</head>
<body>
<textarea id="pad" spellcheck="false" autofocus placeholder=""></textarea>
<div id="toast" class="toast">saved</div>

<script>
(() => {
  const KEY = "pad.v1";
  const pad = document.getElementById("pad");
  const toast = document.getElementById("toast");

  // load existing text
  try {
    const saved = localStorage.getItem(KEY);
    if (saved !== null) pad.value = saved;
  } catch {}

  // debounce autosave
  let t;
  function save(show) {
    try { localStorage.setItem(KEY, pad.value); } catch {}
    if (show) {
      toast.style.opacity = 1;
      clearTimeout(t);
      t = setTimeout(() => toast.style.opacity = 0, 600);
    }
  }

  pad.addEventListener("input", () => {
    clearTimeout(t);
    t = setTimeout(() => save(false), 250);
  });

  // Ctrl/Cmd+S to save (with toast)
  document.addEventListener("keydown", (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "s") {
      e.preventDefault();
      save(true);
    }
  });

  // Optional: persist scroll position
  const POS = KEY + ".pos";
  try {
    const y = +localStorage.getItem(POS);
    if (!Number.isNaN(y)) pad.scrollTop = y;
  } catch {}
  pad.addEventListener("scroll", () => {
    try { localStorage.setItem(POS, String(pad.scrollTop)); } catch {}
  });
})();
</script>
</body>
</html>
